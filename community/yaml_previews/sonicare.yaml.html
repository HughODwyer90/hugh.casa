
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>sonicare.yaml</title>
            <link rel="stylesheet" id="dynamic-styles">
            <link rel="icon" id="dynamic-favicon">
        </head>
        <body>
            <div class="fixed-header">
                <h1>Viewing: sonicare.yaml</h1>
            </div>
            <div class="scrollable-content">
                <pre class="yaml-content">ble_client:
  mac_address: &quot;24:E5:AA:5C:A8:A0&quot;
  id: hugh_toothbrush
  name: &quot;Hugh Toothbrush&quot;
  auto_connect: true
  on_connect:
    then:
      - lambda: |-
          id(hugh_toothbrush_connected) = true;
          ESP_LOGD(&quot;ble_client_lambda&quot;, &quot;Connected to Hugh Toothbrush&quot;);
          id(hugh_toothbrush)-&gt;pair();
          id(hugh_toothbrush_toothbrush_battery_value).set_update_interval(15000);
          id(hugh_toothbrush_toothbrush_battery_value).call_setup();
          id(hugh_toothbrush_toothbrush_head_nfc).set_update_interval(10000);
          id(hugh_toothbrush_toothbrush_head_nfc).call_setup();
          id(hugh_toothbrush_toothbrush_head_id).set_update_interval(11000);
          id(hugh_toothbrush_toothbrush_head_id).call_setup();
          id(hugh_toothbrush_toothbrush_strength).set_update_interval(10000);
          id(hugh_toothbrush_toothbrush_strength).call_setup();

  on_disconnect:
    then:
      - lambda: |-
          id(hugh_toothbrush_connected) = false;
          ESP_LOGD(&quot;ble_client_lambda&quot;, &quot;Disconnected from Hugh Toothbrush&quot;);
          id(hugh_toothbrush_toothbrush_battery_value).set_update_interval(4294967295);
          id(hugh_toothbrush_toothbrush_battery_value).call_setup();
          id(hugh_toothbrush_toothbrush_head_nfc).set_update_interval(4294967295);
          id(hugh_toothbrush_toothbrush_head_nfc).call_setup();
          id(hugh_toothbrush_toothbrush_head_id).set_update_interval(4294967295);
          id(hugh_toothbrush_toothbrush_head_id).call_setup();
          id(hugh_toothbrush_toothbrush_strength).set_update_interval(4294967295);
          id(hugh_toothbrush_toothbrush_strength).call_setup();

globals:
  - id: hugh_toothbrush_connected
    type: bool
    restore_value: no
    initial_value: &quot;false&quot;

binary_sensor:
  - platform: template
    name: &quot;Hugh Toothbrush Connection&quot;
    id: hugh_toothbrush_ble_connection
    icon: &quot;mdi:bluetooth-connect&quot;
    lambda: |-
      return id(hugh_toothbrush_connected);
    device_class: connectivity

sensor:
  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_battery_value
    name: &quot;Hugh Toothbrush Battery&quot;
    type: characteristic
    service_uuid: 180F
    characteristic_uuid: 2A19
    notify: true
    update_interval: never
    unit_of_measurement: &quot;%&quot;
    accuracy_decimals: 0
    device_class: battery

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_active_seconds
    name: &quot;Hugh Toothbrush Active Time&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50002
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d54090
    notify: true
    update_interval: never
    accuracy_decimals: 0
    unit_of_measurement: s

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_state_id
    name: &quot;Hugh Toothbrush status id&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50001
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d54010
    notify: true
    update_interval: never
    internal: true
    on_value:
      then:
        - component.update: hugh_toothbrush_toothbrush_state

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_mode_id
    name: &quot;Hugh Toothbrush mode id&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50002
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d54080
    notify: true
    update_interval: never
    internal: true
    on_value:
      then:
        - component.update: hugh_toothbrush_toothbrush_mode

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_head_id
    name: &quot;Hugh Toothbrush head id&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50006
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d54220
    notify: true
    update_interval: never
    internal: true
    on_value:
      then:
        - component.update: hugh_toothbrush_toothbrush_head

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_head_nfc
    name: &quot;Hugh Toothbrush head nfc&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50006
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d542a0
    notify: true
    update_interval: never
    internal: true
    on_value:
      then:
        - component.update: hugh_toothbrush_toothbrush_head

  - platform: ble_client
    ble_client_id: hugh_toothbrush
    id: hugh_toothbrush_toothbrush_strength
    icon: &quot;mdi:toothbrush-electric&quot;
    name: &quot;Hugh Toothbrush Strength&quot;
    type: characteristic
    service_uuid: 477ea600-a260-11e4-ae37-0002a5d50002
    characteristic_uuid: 477ea600-a260-11e4-ae37-0002a5d540b0
    lambda: |-
      return (float(x[0]) + 1);
    notify: true
    update_interval: never

text_sensor:
  - platform: template
    name: &quot;Hugh Toothbrush State&quot;
    id: hugh_toothbrush_toothbrush_state
    icon: &quot;mdi:toothbrush-electric&quot;
    update_interval: never
    lambda: |-
      if (id(hugh_toothbrush_toothbrush_state_id).state == 0) {
        return &quot;Off&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 1) {
        return &quot;Standby&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 2) {
        return &quot;Run&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 3) {
        return &quot;Charge&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 5) {
        return &quot;Shutdown&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 6) {
        return &quot;Validate&quot;;
      } else if (id(hugh_toothbrush_toothbrush_state_id).state == 7) {
        return &quot;LightsOut&quot;;
      } else {
        return &quot;&quot;;
      }

  - platform: template
    name: &quot;Hugh Toothbrush Mode&quot;
    id: hugh_toothbrush_toothbrush_mode
    icon: &quot;mdi:toothbrush-electric&quot;
    update_interval: never
    lambda: |-
      if (id(hugh_toothbrush_toothbrush_mode_id).state == 0) {
        return &quot;Clean&quot;;
      } else if (id(hugh_toothbrush_toothbrush_mode_id).state == 1) {
        return &quot;White+&quot;;
      } else if (id(hugh_toothbrush_toothbrush_mode_id).state == 2) {
        return &quot;Gum Health&quot;;
      } else if (id(hugh_toothbrush_toothbrush_mode_id).state == 3) {
        return &quot;Deep Clean+&quot;;
      } else {
        return &quot;&quot;;
      }

  - platform: template
    name: &quot;Hugh Toothbrush Head&quot;
    id: hugh_toothbrush_toothbrush_head
    icon: &quot;mdi:toothbrush-electric&quot;
    update_interval: never
    lambda: |-
      if (id(hugh_toothbrush_toothbrush_head_nfc).state == 1) {
        if (id(hugh_toothbrush_toothbrush_head_id).state == 0) {
          return &quot;Adaptive Clean&quot;;
        } else if (id(hugh_toothbrush_toothbrush_head_id).state == 1) {
          return &quot;Adaptive White&quot;;
        } else if (id(hugh_toothbrush_toothbrush_head_id).state == 2) {
          return &quot;Tongue Care&quot;;
        } else if (id(hugh_toothbrush_toothbrush_head_id).state == 3) {
          return &quot;Adaptive Gums&quot;;
        } else {
          return &quot;Unknown&quot;;
        }
      } else if (id(hugh_toothbrush_toothbrush_head_nfc).state == 0) {
        return &quot;N/A&quot;;
      } else {
        return &quot;&quot;;
      }
</pre>
            </div>
            <script>
                (function fixPaths() {
                    // ✅ If inside yaml_previews, use "../assets/", otherwise use "assets/"
                    var basePath = window.location.pathname.includes("/yaml_previews/") ? "../assets/" : "assets/";

                    // ✅ Apply correct asset paths
                    document.getElementById("dynamic-styles").href = basePath + "table-styles.css";
                    document.getElementById("dynamic-favicon").href = basePath + "favicon.ico";

                    var script = document.createElement("script");
                    script.src = basePath + "table-functions.js";
                    document.body.appendChild(script);
                })();
            </script>
        </body>
        </html>
        